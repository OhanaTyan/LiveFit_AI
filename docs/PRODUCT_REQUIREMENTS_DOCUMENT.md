# 产品需求文档 (PRD) - LifeFit AI

**版本**: 1.0 (MVP)
**日期**: 2026-01-20
**项目代号**: LifeFit

---

## 1. 项目背景与愿景 (Vision)

### 1.1 核心痛点
市面上的健身 App（如 Keep、训记）多为“课程库”或“记录工具”，它们假设用户有固定的、大块的时间来适应训练计划。然而，现实中的用户（尤其是学生和上班族）面临的主要矛盾是：**想健身，但日程不可控**。
*   **学生**: 课表满，只有课间和午休，去健身房门槛高。
*   **上班族**: 突发会议多，加班常态化，计划一旦被打断就容易放弃。
*   **初学者**: 不知道如何根据自己的体质（胖/瘦）调整计划。

### 1.2 产品定位
**LifeFit AI** 是一款**“日程驱动型”**的智能健身助手。
*   **不是**：一个只有视频课程的播放器。
*   **而是**：一个能读取你的一天安排，自动把运动“缝”进你生活间隙的 AI 私教。

### 1.3 核心价值主张
> "不是你适应计划，而是计划适应你的生活。"

---

## 2. 用户画像与场景 (Target Audience)

### 2.1 典型用户 A：忙碌打工人 (The Worker)
*   **特征**: 996，久坐，有健康焦虑，用钉钉/Outlook。
*   **场景**: 下午 14:00 有个客户会议取消了，空出 30 分钟。
*   **需求**: App 自动识别空闲，推送“办公室深蹲+拉伸”，不尴尬，微出汗。

### 2.2 典型用户 B：在校大学生 (The Student)
*   **特征**: 作息规律（上课/自习），无收入或低收入，有操场资源。
*   **场景**: 上午第二节课下课，有 20 分钟大课间。
*   **需求**: App 根据课表识别“大课间”，推送“操场慢跑 2 圈”。

### 2.3 典型用户 C：硬核健身党 (The Gym Rat)
*   **特征**: 追求增肌/刷脂，需要精准控制。
*   **需求**: 遇到加班不能去健身房时，AI 自动生成“居家大重量替代方案”或“调整本周后续计划”。

---

## 3. 功能需求说明 (Functional Requirements)

### 3.1 核心模块一：用户档案与体质分析
*   **输入**:
    *   基础信息：身高、体重、年龄、性别。
    *   **健身资源** (新增)：
        *   环境：宿舍/办公室/家/健身房。
        *   器械：无器械(自重)/哑铃/瑜伽垫/弹力带/健身房全套。
    *   **体质自测**（核心差异点）：
        *   **外胚型 (Ectomorph)**: 瘦长，难增肌 -> 策略：低有氧，高碳水，长组间休息。
        *   **中胚型 (Mesomorph)**: 强壮，易增肌 -> 策略：标准计划。
        *   **内胚型 (Endomorph)**: 圆润，易胖 -> 策略：高消耗，控碳，短间歇。
*   **输出**: 基础代谢率 (BMR)，推荐的三大营养素比例。

### 3.2 核心模块二：全场景日程聚合 (Schedule Aggregator)
这是本产品的**技术护城河**。策略从“被动读取”转变为**“主动问答构建”**。

| 数据源 | 适用人群 | 技术实现路径 |
| :--- | :--- | :--- |
| **对话式构建** | **通用 (核心)** | **AI 主动提问**：“今天大概有什么安排？” -> 用户语音/文字回复 -> AI 生成时间轴 -> **插入运动建议**。 |
| **系统日历** | 上班族 | 作为**辅助**验证，或在用户未回答时兜底读取。 |
| **课表 OCR** | 学生 | 用户上传课表截图 -> 转化为周期性日程模板。 |
| **手动标记** | 通用 | 提供“突发忙碌”大按钮，一键推迟计划。 |
| **健康数据** | 通用 | 读取 Apple Health/华为健康 (步数、睡眠)。 |

### 3.3 核心模块三：AI 编排引擎 (The Brain)
当检测到日程与训练计划冲突时，触发**智能重排**。
*   **逻辑 A：碎片化 (Fragmentation)**
    *   *触发*: 原定 60min 训练，现只有 3 个 15min 碎片。
    *   *动作*: 将“胸肌训练”拆解为 3 组“俯卧撑变式”。
*   **逻辑 B：动态补偿 (Compensation)**
    *   *触发*: 今天完全没空。
    *   *动作*: 这是一个“休息日”，将负荷平摊到明后两天（强度 +15%）。
*   **逻辑 C：场景适配 (Context Awareness)**
    *   *触发*: 当前位置 = 办公室/教室。
    *   *动作*: 过滤掉“波比跳”等大幅度动作，推荐“静力蹲/提踵”。

### 3.4 核心模块四：微运动库 (Micro-Workout Library)
建立一套带**场景标签**的动作库。
*   **标签体系**: `#办公室` `#宿舍` `#通勤` `#无汗` `#隐蔽` `#需器械`。
*   **内容**: 只有 GIF 动图或短视频，加载快，无需长视频缓冲。

### 3.5 核心模块五：AI 语音日程助理 (Voice Schedule Agent)
针对非结构化日程（社团、约会、临时办事），通过多轮对话完善信息。
*   **交互方式**: 类似微信发语音。
*   **能力**:
    *   **意图识别**: 识别是“新增日程”还是“调整训练”。
    *   **多轮追问 (Slot Filling)**:
        *   用户: "明天下午我有社团活动。"
        *   AI: "收到。大概几点开始？会持续多久呢？"
        *   用户: "3点开始，两小时。"
        *   AI: "好的，已锁定 15:00-17:00 为忙碌时段。原定训练将移至晚上 19:00，可以吗？"

### 3.6 核心模块六：游戏化激励 (Gamification)
为枯燥的坚持增加乐趣。
*   **能量电池 (Energy Battery)**:
    *   将用户身体比作一块电池。
    *   **工作/学习** = 耗电 (Draining)。
    *   **运动/休息** = 充电 (Charging)。
    *   *视觉反馈*: 随着一天过去，电池变红，完成一个微运动，电池回血变绿。
*   **连胜保护 (Streak Freeze)**:
    *   允许每周有 1-2 天“合法摆烂日”，不打断连续打卡记录。

### 3.7 核心模块七：社群与共鸣 (Social)
*   **体质搭子 (Body Type Partner)**:
    *   匿名匹配同体质、同日程类型的用户（如：都是“外胚型+加班党”）。
    *   不看脸，只看今日完成率，互相“拍一拍”提醒。

---

## 4. 技术方案与实现路径 (Technical Implementation)

### 4.1 客户端 (App)
*   **框架**: Flutter (Google 跨平台框架)，一套代码生成 iOS 和 Android。
*   **关键插件**:
    *   `device_calendar`: 读写本地日历。
    *   `health`: 聚合健康数据接口。
    *   `sqflite`: 本地存储用户计划与历史。

### 4.2 服务端 (Backend) - *MVP 阶段可轻量化*
*   初期可将算法逻辑写在 App 本地（离线可用，隐私更好）。
*   后期上云，用于同步数据和更新动作库。

### 4.3 数据隐私
*   **承诺**: 用户的日历和健康数据**仅在本地处理**，不上传服务器，消除用户对隐私的顾虑。

---

## 5. 交互流程设计 (UX Flow)

1.  **Onboarding (首次进入)**
    *   询问体质 & **健身资源** (如：有无哑铃) -> 申请权限 -> 生成初始档案。
2.  **Morning Check-in (每日晨会)**
    *   **AI 提问**：“早安！今天大概怎么安排？”
    *   **用户回答**：“上午开会，中午没事，晚上要去约会。”
    *   **AI 生成**：生成今日时间轴，并在“中午”插入“20分钟办公室微练”。
3.  **Intervention (实时干预)**
    *   监测到久坐 1 小时 -> 弹窗：“去茶水间倒杯水，顺便做 20 个开合跳？”
4.  **Reschedule (冲突处理)**
    *   用户添加“临时加班” -> App 弹窗：“没关系，已为您将有氧移至明天。”

---

## 6. 演进路线图 (Roadmap)

### Phase 1: MVP (最小可行性产品) - *当前阶段*
*   [x] 核心算法验证 (Python Demo)
*   [ ] App 框架搭建 (Flutter)
*   [ ] 实现“系统日历读取”
*   [ ] 实现“基础体质录入”
*   [ ] 内置 20 个基础微动作

### Phase 2: 针对性优化
*   [ ] **学生版功能**: 上线“课表截图导入” (OCR)。
*   [ ] **饮食模块**: 简单的热量缺口计算器。
*   [ ] **养生插件**: 24 节气生活建议。

### Phase 3: 生态连接
*   [ ] 接入华为/小米运动健康 Kit。
*   [ ] 智能穿戴设备联动。

---

## 7. 风险与对策
*   **风险**: 日历权限申请被拒。
    *   **对策**: 提供手动模式，允许用户手动添加“忙碌时段”。
*   **风险**: OCR 识别准确率低。
    *   **对策**: 接入大模型 (LLM) 进行二次纠错，或提供手动修正界面。
*   **风险**: 持续后台运行导致耗电 (Battery Drain)。
    *   **对策**: 仅在特定时间点（如整点）唤醒检查，而非实时轮询。
*   **风险**: 推送过多导致用户厌烦 (Notification Fatigue)。
    *   **对策**: 引入“勿扰模式”，并学习用户习惯（如果连续拒绝两次，降低推送频率）。

---

## 8. 商业模式 (Business Model)
采用 **Freemium (免费+增值)** 模式。
*   **Free (基础版)**:
    *   基础体质分析。
    *   系统日历同步。
    *   基础微运动库。
*   **Pro (会员版)**:
    *   AI 语音日程助理 (无限次)。
    *   OCR 课表识别。
    *   高级编排引擎（自动碎片化重排）。
    *   深度体态分析与纠正。

---

## 9. 隐私与信任 (Privacy & Trust)
*   **Local-First 架构**:
    *   用户的日历、日程、健康数据默认**仅存储在本地设备**。
    *   AI 运算（如日程冲突检测）尽可能在本地运行。
    *   仅在需要云端能力（如大模型对话、OCR）时，脱敏上传必要数据，并用完即焚。
